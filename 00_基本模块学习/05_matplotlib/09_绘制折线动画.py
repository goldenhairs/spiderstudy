import matplotlib.pyplot as plt
from matplotlib.animation import FuncAnimation

china = [264, 462, 688, 777, 1773, 1464, 1737, 1984, 2101, 2590, 2827, 3233, 3892, 3697, 3151, 3387, 2653, 2923, 2467, 2015, 16265, 3011, 2644, 2008, 2051, 1893, 1751, 822, 892, 399, 649, 221, 517, 411, 440, 329, 430, 579, 206, 128, 120, 143, 145, 103, 46, 45, 20, 31, 25, 23, 18, 27, 29, 39, 35, 84, 65, 116, 82, 102, 147, 100, 113, 118, 135, 128, 106, 98, 86, 93, 78, 73, 55, 75, 66, 86, 92, 56, 64, 113, 115, 99, 49, 52, 352, 31, 21, 36, 13, 37, 15, 9, 13, 14, 3, 6, 22, 0, 16, 3, 5, 7, 4, 0, 4, 7, 1, 15, 19, 1, 7, 6, 5, 9, 6, 10, 6, 5, 2, 13, 2, 3, 11, 7, 1, 3, 0, 14, 9, 18, 9, 7, -1, 11, 3, 8, 9, 4, 3, 11, 7, 12, 58, 49, 45, 44, 36, 37, 30, 27, 21, 52, 28, 21, 29, 24, 18, 14, 23, 5, 31, 15, 6, 22, 11, 28, 21, 33, 46, 42, 35, 46, 55, 54, 20, 78, 82, 80, 131, 84, 62, 147, 139, 160, 179, 189, 217, 212, 223, 276, 166, 179, 158, 114, 109, 122, 133, 120, 92, 121, 115, 59, 82, 99, 70, 66, 98, 67, 54, 33, 40, 50, 38, 41, 23, 34, 32, 30, 22, 28, 32, 19, 20, 20, 15, 41, 19, 34, 22, 9, 13, 28, 20, 23, 29, 23, 16, 19, 44, 17, 26, 36, 14, 18, 10, 15, 18, 15, 27, 25, 23, 20, 21, 19, 20, 25, 24, 18, 13, 51, 26, 27, 28, 26, 29, 11, 37, 24, 30, 17, 39, 19, 23, 33, 32, 22, 26, 24, 10, 86, 31, 41, 28, 34, 60, 30, 32, 44, 43, 31, 47, 29, 28, 37, 36, 32, 24, 24, 24, 14, 23, 31, 44, 60, 85, 96, 85, 111, 88, 112, 104, 136, 112, 91, 129, 108, 133, 122, 133, 90, 117, 118, 131, 100, 101, 114, 103, 112, 96, 116, 89, 136, 100, 100, 82, 76, 85, 81, 84, 93, 96, 79, 81, 89, 45, 87, 78, 89, 66, 90, 89, 81, 131, 134, 102, 179, 184, 173, 169, 166, 169, 232, 165, 223, 175, 178, 164, 205, 155, 140, 117, 93, 106, 130, 97, 65, 53, 51, 98, 31, 44]
time = ['1月{}日'.format(i) for i in range(1, len(china) + 1)]

fig = plt.figure(figsize=(10, 6))

# 初始化坐标轴和折线图
line, = plt.plot([], [], color='r', marker='o')

# 设置y轴坐标范围
plt.ylim(0, 4000)
# 设置x轴坐标范围，即用于展示的
x_range = 10
plt.xlim(0, x_range)
# 初始化x轴坐标
x = list(range(len(time)))
plt.xticks(x[0:x_range], time[0:x_range])

# 定义变量用于表示每帧显示几条数据
line_range = 6


# 实现动画更新方法，用于更新折线图
def update(i):
    # 起始索引
    start = 0 if i - line_range < 0 else i - line_range
    # 结束索引
    end = i + 1
    # 更新折线图的数据
    line.set_data(x[start:end], china[start:end])
    # 更新横轴
    if i > line_range:
        # 计算横轴结束索引
        x_end = i + (x_range - line_range) if i + (x_range - line_range) < len(x) else len(x)
        # 更新横轴范围
        plt.xlim(start, x_end)
        plt.xticks(x[start:end], time[start:x_end])
    if i > 50:
        plt.ylim(0, 500)
    return line


# 创建动画
animation = FuncAnimation(fig, update, frames=x, repeat=False)

plt.show()
